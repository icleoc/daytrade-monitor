<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>VWAP Monitor</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { border-collapse: collapse; margin-bottom: 30px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f4f4f4; }
        .failed { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h1>VWAP Monitor</h1>

    {% if failed_assets %}
        <p class="failed">⚠️ Falha ao carregar dados dos seguintes ativos: {{ failed_assets|join(', ') }}</p>
    {% endif %}

    {% for ticker, df in assets_data.items() %}
        <h2>{{ ticker }}</h2>
        <table>
            <thead>
                <tr>
                    {% for col in df.columns %}
                        <th>{{ col }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in df.tail(5).itertuples() %}
                    <tr>
                        {% for value in row[1:] %}
                            <td>{{ value }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endfor %}
</body>
</html>
