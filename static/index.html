<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VWAP Monitor</title>
<style>
body { font-family: Arial, sans-serif; background:#f5f5f5; padding:20px; }
h1 { text-align:center; }
.cards { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; margin-top:20px; }
.card { background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1); width:200px; text-align:center; transition:transform 0.2s; }
.card:hover { transform:translateY(-5px); }
.asset { font-size:1.2em; font-weight:bold; margin-bottom:10px; }
.value { margin:5px 0; font-size:1em; }
.signal { font-weight:bold; font-size:1.1em; padding:5px 10px; border-radius:8px; color:#fff; display:inline-block; margin-top:10px; }
.COMPRA { background-color:#28a745; }
.VENDA { background-color:#dc3545; }
.NEUTRO { background-color:#6c757d; }
</style>
</head>
<body>
<h1>VWAP Monitor Day Trade</h1>
<div class="cards" id="cards"></div>
<script>
async function fetchSignals() {
    try {
        const res = await fetch('/api/signals');
        const data = await res.json();
        const cardsContainer = document.getElementById('cards');
        cardsContainer.innerHTML = '';
        for (const asset in data) {
            const item = data[asset];
            const preco = item.preco !== null ? item.preco.toFixed(2) : '-';
            const vwap = item.vwap !== null ? item.vwap.toFixed(2) : '-';
            const sinal = item.sinal;
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="asset">${asset}</div>
                <div class="value">Pre√ßo: ${preco}</div>
                <div class="value">VWAP: ${vwap}</div>
                <div class="signal ${sinal}">${sinal}</div>
            `;
            cardsContainer.appendChild(card);
        }
    } catch (err) { console.error('Erro ao buscar sinais:', err); }
}
fetchSignals();
setInterval(fetchSignals, 30000);
</script>
</body>
</html>
